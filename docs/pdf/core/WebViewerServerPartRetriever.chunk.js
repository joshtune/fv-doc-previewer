/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[16],{394:function(ia,da,e){function ca(e,h,n){h.endsWith("/")||(h+="/");n=n||{};var r=n.disableWebsockets||!1;this.YV=n.singleServerMode||!1;null!=n.customQueryParameters&&Object(f.b)("wvsQueryParameters",n.customQueryParameters);h.endsWith("blackbox/")||(h+="blackbox/");this.pn=n.uploadData||null;this.Vw=n.uriData||null;this.FO=n.cacheKey||null;this.cT=n.officeLocale||null;this.qF=Object(y.a)(h,null,r);this.bf=h;this.IF=e;this.sf=
null;this.Hj=ea();this.pm=ea();this.rz=!1;this.jg=this.Td=this.me=this.af=null;this.xf=[];this.dA=[];this.cache={};this.timeStamp=0;this.Uf=[];this.nh=[];this.fG=null;this.zF=!1;this.LJ=this.id=null;this.iI=this.AR=aa;this.jC=0;this.kH=!1;this.YS=1;this.xj={};this.Pp(!0)}function ea(){var e={promise:null,resolve:null,reject:null,state:0,result:null,request:null,Jr:function(){return 1===(e.state&1)},o$:function(){return 2===(e.state&2)},gi:function(){return!e.o$()&&!e.Jr()},R9:function(){return 4===
(e.state&4)},tV:function(){e.state|=4}};e.promise=new Promise(function(f,h){e.resolve=function(){if(0===e.state||4===e.state)e.state=1,e.result=arguments[0],f.apply(null,arguments)};e.reject=function(){if(0===e.state||4===e.state)e.state=2,h.apply(null,arguments)}});return e}function aa(){return!1}function ha(e,f,h){if(!(f in fa))return!0;f=fa[f];for(var n=0;n<f.length;n++){var r=e;var w=f[n];var x=h;if(w.name in r){var y="",z=!1;r=r[w.name];switch(w.type){case "s":y="String";z=Object(ba.isString)(r);
break;case "a":y="Array";z=Object(ba.isArray)(r);break;case "n":y="Number";z=Object(ba.isNumber)(r)&&Object(ba.isFinite)(r);break;case "o":y="Object",z=Object(ba.isObject)(r)&&!Object(ba.isArray)(r)}z||x.reject('Expected response field "'+w.name+'" to have type '+y);w=z}else x.reject('Response missing field "'+w.name+'"'),w=!1;if(!w)return!1}return!0}e.r(da);var ba=e(0);e.n(ba);var z=e(2);ia=e(48);var w=e(29),y=e(411),r=e(88),n=e(351),h=e(108),f=e(41),x=e(158),fa={pages:[{name:"pages",type:"a"}],
pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",type:"n"},{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};ca.prototype=Object(ba.extend)(ca.prototype,{z3:function(){var e=
this;return new Promise(function(f,h){var n=new XMLHttpRequest;n.open("GET",e.bf+"ck");n.withCredentials=e.Nk();n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&(200===n.status?f():h())};n.send()})},Pea:function(e,f){this.AR=e||aa;this.iI=f||aa},WO:function(){var e=this;this.pm=ea();this.Hj=ea();return this.qF.VF().then(function(){e.rz=!1;e.id=null;e.zF=!1;return e.z3()})},uJ:function(){this.AR();this.BH();this.af&&(this.af.gi()?this.tf(this.af.request):this.af.Jr()&&this.iI(this.af.result.url,
"pdf")&&(this.af=null,this.TU()));this.jg&&this.jg.gi()&&this.tf(this.jg.request);this.me&&this.me.gi()?this.tf(this.me.request):this.Td&&this.Td.gi()&&this.pR(this.Td.request);var e;for(e=0;e<this.Uf.length;e++)this.Uf[e]&&this.Uf[e]&&(this.Uf[e].gi()?this.tf(this.Uf[e].request):this.Uf[e].Jr()&&this.iI(this.Uf[e].result.url,"image")&&(this.Uf[e]=null,this.gC(e)));for(e=0;e<this.nh.length;e++)this.nh[e]&&this.nh[e]&&this.nh[e].gi()&&!this.nh[e].R9()&&this.tf(this.nh[e].request);for(e=0;e<this.xf.length;e++)this.xf[e]&&
this.xf[e].gi()&&this.tf(this.xf[e].request)},BH:function(e){var f=this;this.rz||(this.timeStamp=Date.now(),this.qF.uK(function(e){f.Daa(e)},function(){return null},function(){return null},!0).then(function(){clearInterval(f.ZB);f.ZB=null},function(n){f.rz=!1;if(!f.ZB){var r=0;f.zF=!0;f.LJ=0;f.ZB=setInterval(function(){2>r++?f.uJ():(clearInterval(f.ZB),e&&e.reject(h.a),Object(z.f)("WebViewerServer connection failed:"+n))},5E3)}}),this.rz=!0)},fha:function(){var e=this,f=createPromiseCapability();
if(this.pn){var h=new FormData;h.append("file",this.pn.fileHandle,this.pn.fileHandle.name);var n=this.pn.loadCallback;var r="upload";var y=this.pn.extension}else if(this.Vw){h={uri:this.Vw.uri,bla:this.Vw.shareId};h=Object.keys(h).map(function(e){return e+"="+(h[e]?encodeURIComponent(h[e]):"")}).join("&");var z="application/x-www-form-urlencoded; charset=UTF-8";n=this.Vw.loadCallback;r="url";y=this.Vw.extension}else return Promise.resolve();var aa=new XMLHttpRequest,ba=Object(w.j)(e.bf,"AuxUpload");
ba=Object(x.a)(ba)+"&type="+r+"&ext="+y;aa.open("POST",ba);aa.withCredentials=this.Nk();z&&aa.setRequestHeader("Content-Type",z);aa.addEventListener("load",function(){if(aa.readyState===aa.DONE&&200===aa.status){var h=JSON.parse(aa.response);e.IF=h.uri;n(h);f.resolve(h)}});aa.addEventListener("error",function(){f.reject(aa.statusText+" "+JSON.stringify(aa))});this.pn&&null!=this.pn.onProgress&&(aa.upload.onprogress=function(f){e.pn.onProgress(f)});aa.send(h);return f.promise},tda:function(e){this.password=
e||null;this.Hj.Jr()||(this.Hj=ea(),this.tf({t:"pages"}));return this.Hj.promise},lw:function(e){this.fG=e||null;this.Hj.Jr()||(this.BH(this.Hj),this.tf({t:"pages"}));return this.Hj.promise},oF:function(e){e=Object.assign(e,{uri:encodeURIComponent(this.IF)});this.fG&&(e.ext=this.fG);this.sf&&(e.c=this.sf);this.password&&(e.pswd=this.password);this.FO&&(e.cacheKey=this.FO);this.cT&&(e.locale=this.cT);return e},tf:function(e){e=this.oF(e);this.qF.send(e)},zk:function(e){return e},Daa:function(e){var h=
this,n=e.data,w=e.err,y=e.t;switch(y){case "upload":w?h.gha.reject(w):h.gha.resolve("Success");break;case "pages":w?h.Hj.reject(w):ha(n,y,h.Hj)&&h.Hj.resolve(n);break;case "config":if(w)h.pm.reject(w);else if(ha(n,y,h.pm)){n.id&&(h.id=n.id);if(n.auth){var aa=Object(f.a)("wvsQueryParameters");aa.auth=n.auth;Object(f.b)("wvsQueryParameters",aa)}n.serverVersion&&(h.Bha=n.serverVersion,Object(z.g)("[WebViewer Server] server version: "+h.Bha));n.serverID?(h.jC=n.serverID===h.LJ&&h.kH?h.jC+1:0,h.LJ=n.serverID):
h.jC=0;h.kH=!1;h.pm.resolve(n)}break;case "health":w?h.pm.reject(w):ha(n,y,h.pm)&&(n=n.unhealthy,h.YV&&n?Object(z.i)("Server failed health check. Single server mode ignoring check."):!h.vja&&n&&1>=h.jC&&(h.kH=!0,h.WO().then(function(){h.uJ()},function(){h.uJ()})));break;case "pdf":n.url=Object(x.a)(h.bf+"../"+encodeURI(n.url));w?h.af.reject(w):ha(n,y,h.af)&&h.af.resolve(n);break;case "ApString2Xod":n.url=Object(x.a)(h.bf+"../data/"+encodeURI(n.url));w?h.xj[n.rID].reject(w):ha(n,y,h.xj[n.rID])&&h.xj[n.rID].resolve(n);
break;case "docmod":n.url=Object(x.a)(h.bf+"../"+encodeURI(n.url));w?h.xj[n.rID].reject(w):ha(n,y,h.af)&&h.xj[n.rID].resolve(n);break;case "xod":if(w)this.me&&this.me.gi()&&this.me.reject(w),this.Td&&this.Td.gi()&&this.Td.reject(w);else if(n.notFound)n.noCreate||this.me&&this.me.gi()&&this.me.resolve(n),this.Td&&this.Td.gi()&&this.Td.resolve(n);else{n.url&&(n.url=Object(x.a)(h.bf+"../"+encodeURI(n.url)));if(!this.Td||this.Td.Jr())this.Td=ea(),this.Td.request={t:"xod",noCreate:!0};this.me||(this.me=
ea(),this.me.request={t:"xod"});this.Td.resolve(n);this.me.resolve(n)}break;case "annots":if(w)h.jg.reject(w);else if(ha(n,y,h.jg)){h.jg.tV();var ba=new XMLHttpRequest;aa=h.bf+"../"+encodeURI(n.url);var ca=n.hasAppearance?Object(x.a)(aa+".xodapp"):null;ba.open("GET",Object(x.a)(aa));ba.responseType="text";ba.withCredentials=this.Nk();ba.addEventListener("load",function(){ba.readyState===ba.DONE&&200===ba.status&&h.jg.resolve({PK:ba.response,pO:ca})});ba.addEventListener("error",function(){h.jg.reject(ba.statusText+
" "+JSON.stringify(ba))});ba.send()}break;case "image":var fa=this.Uf[n.p];w?fa.promise.reject(w):ha(n,y,fa)&&(fa.result=n,fa.result.url=Object(x.a)(h.bf+"../"+encodeURI(fa.result.url)),fa.resolve(fa.result));break;case "tiles":fa=n.rID;aa=this.xf[fa];this.xf[fa]=null;this.dA.push(fa);if(w)aa.reject(w);else if(ha(n,y,aa)){for(w=0;w<n.tiles.length;w++)n.tiles[w]=Object(x.a)(h.bf+"../"+encodeURI(n.tiles[w]));aa.resolve(n)}break;case "text":fa=this.nh[n.p];if(w)fa.reject(w);else if(ha(n,y,fa)){fa.tV();
var da=new XMLHttpRequest;n=Object(x.a)(h.bf+"../"+encodeURI(n.url));da.open("GET",n);da.withCredentials=this.Nk();da.addEventListener("load",function(){da.readyState===da.DONE&&200===da.status&&(fa.result=JSON.parse(da.response),fa.resolve(fa.result))});da.addEventListener("error",function(e){fa.reject(da.statusText+" "+JSON.stringify(e))});da.send()}break;case "progress":"loading"===n.t&&h.trigger(r.a.Events.DOCUMENT_LOADING_PROGRESS,[n.bytes,n.total])}!y&&e.echo&&e&&"apstring2xod"==e.echo.t&&(e=
e.echo.reqID)&&h.xj[e].reject("Message unhandled by server")},wQ:function(){this.BH(this.pm);return this.pm.promise},O6:function(e){var f=this,h=new XMLHttpRequest,n=Object(x.a)(this.bf+"aul")+"&id="+this.id,r=new FormData,w={};e=vc(e.body);for(var y=e.next();!y.done;y=e.next())y=y.value,w[y.id]=y.NE.w+";"+y.NE.h,r.append(y.id,y.NE.dataString);w={t:"apstring2xod",reqID:this.YS++,parts:w};var z=this.oF(w);r.append("msg",JSON.stringify(z));f.xj[z.reqID]=ea();h.open("POST",n);h.withCredentials=f.Nk;
n=new Promise(function(e,f){h.onreadystatechange=function(){4===h.readyState&&(200===h.status?e():f("An error occurred while sending down appearance strings to the server"))}});h.send(r);return n.then(function(){return f.xj[z.reqID].promise})},N6:function(){this.jg||(this.jg=ea(),this.jg.request={t:"annots"},this.tf(this.jg.request));return this.jg.promise},gC:function(e){this.Uf[e]||(this.Uf[e]=ea(),this.Uf[e].request={t:"image",p:e},this.tf(this.Uf[e].request));return this.Uf[e].promise},uda:function(e){this.nh[e]||
(this.nh[e]=ea(),this.nh[e].request={t:"text",p:e},this.tf(this.nh[e].request));return this.nh[e].promise},vda:function(e,f,h,n){var r=this.xf.length;this.dA.length&&(r=this.dA.pop());this.xf[r]=ea();this.xf[r].request={t:"tiles",p:e,z:f,r:h,size:n,rID:r};this.tf(this.xf[r].request);return this.xf[r].promise},TU:function(){this.af||(this.af=ea(),this.af.request={t:"pdf"},this.zF?this.af.resolve({url:this.IF}):this.tf(this.af.request));return this.af.promise},OQ:function(e){var f=this,h=new XMLHttpRequest,
n=Object(x.a)(this.bf+"aul")+"&id="+this.id,r=new FormData,w={};e.annots&&(w.annots="xfdf");e.watermark&&(w.watermark="png");e.redactions&&(w.redactions="redact");w={t:"docmod",reqID:this.YS++,parts:w};e.print&&(w.print=!0);var y=this.oF(w);r.append("msg",JSON.stringify(y));return Promise.all([e.annots,e.watermark,e.redactions].map(function(e){return Promise.resolve(e)})).then(function(e){var w=e[0],x=e[1],z=e[2];w&&r.append("annots",w);x&&r.append("watermark",e.watermark);z&&r.append("redactions",
z);f.xj[y.reqID]=ea();h.open("POST",n);h.withCredentials=f.Nk;e=new Promise(function(e,f){h.onreadystatechange=function(){4===h.readyState&&(200===h.status?e():f("An error occurred while sending down annotation data to the server"))}});h.send(r);return e.then(function(){return f.xj[y.reqID].promise})})},pR:function(){this.Td||(this.Td=ea(),this.Td.request={t:"xod",noCreate:!0},this.tf(this.Td.request));return this.Td.promise},wda:function(){this.me||(this.me=ea(),this.me.request={t:"xod"},this.tf(this.me.request));
return this.me.promise},$m:function(){return!0},request:function(){},pU:function(){},abort:function(){for(var e=0;e<this.xf.length;e++)this.xf[e]&&(this.xf[e].resolve(null),this.xf[e]=null,this.dA.push(e));this.close()},sC:function(e){this.sf=this.sf||{};this.sf.headers=e},Tja:function(){return this.sf?Object(ba.omit)(this.sf.headers,["Cookie","cookie"]):null},Pp:function(e){this.sf=this.sf||{};this.sf.internal=this.sf.internal||{};this.sf.internal.withCredentials=e},Nk:function(){return this.sf&&
this.sf.internal?this.sf.internal.withCredentials:null},getFileData:function(){return Promise.reject()}});Object(ia.a)(ca);Object(n.a)(ca);Object(n.b)(ca);da["default"]=ca},411:function(ia,da,e){function ca(e,w,y){function r(e,f){function h(e){r().then(function(f){da&&!ia?setTimeout(function(){h(e)},1):f.send(JSON.stringify(e))})}function n(e,f,n,r){var x=window.createPromiseCapability(),fa=!1,ja=x;z=e;ca=f;ea=n;y=null;r&&(e=Object(ha.a)("wvsQueryParameters"),e.bcid=Object(aa.k)(8),Object(ha.b)("wvsQueryParameters",
e));try{e=Fa?wa+"/"+Fa:wa+"/ws";e=Object(ba.a)(e);var la=new WebSocket(e);la.onopen=function(){x.resolve();fa=!0;x=null;da=!1;w.resolve(la);ca&&ca()};la.onerror=function(e){da=ia=!0;x&&x.reject(e);y&&y.reject()};la.onclose=function(){w=window.createPromiseCapability();da=!0;y||(y=window.createPromiseCapability());y.resolve();ea&&ea();z&&fa&&z({t:"health",data:{unhealthy:!0,isDead:!0}})};la.onmessage=function(e){e&&e.data&&(e=JSON.parse(e.data),e.hb?h({hb:!0}):e.end?close():z(e))}}catch(Ga){x.reject(Ga),
x=null}return ja.promise}function r(){da&&z&&n(z);return w.promise}var w=window.createPromiseCapability(),y=null,z,ca,ea=null,da=!1,ia=!1,Fa=f,wa=function(e){var f=e.indexOf("://"),h="ws://";0>f?f=0:(5===f&&(h="wss://"),f+=3);var n=e.lastIndexOf("/");0>n&&(n=e.length);return h+e.slice(f,n)}(e);return{send:h,uK:n,VF:function(){return y?y.promise:r().then(function(e){y=window.createPromiseCapability();z=null;e.close();return y.promise})}}}function n(e){var f=e.lastIndexOf("/");0>f&&(f=e.length);return e.slice(0,
f)}return window.WebSocket&&!y?r(e,w):function(e,f){function h(e){(da?da.promise:Promise.resolve(ca)).then(function(f){var h=new XMLHttpRequest,n=aa?z+"/"+aa+"pf":z+"/pf";n=Object(ba.a)(n)+"&id="+f;f=new FormData;f.append("data",JSON.stringify(e));h.open("POST",n);h.withCredentials=!0;h.send(f)})}function r(){ca=0;da||(da=window.createPromiseCapability())}function w(){y=new XMLHttpRequest;var e=z+"/pf";e+=0!==ca?"?id="+ca+"&uc="+wa:"?uc="+wa;wa++;y.open("GET",e,!0);y.withCredentials=!0;y.setRequestHeader("Cache-Control",
"no-cache");y.setRequestHeader("X-Requested-With","XMLHttpRequest");var f=y,n=!1;y.onreadystatechange=function(){a:if(3<=f.readyState&&!n){try{var e=f.responseText.length}catch(Ea){Object(ea.g)("caught exception");break a}if(0<e)try{var x=f.responseText.split("\n");for(x[x.length-1]&&x.pop();0<x.length&&3>x[x.length-1].length;)"]"===x.pop()&&r();0<x.length&&3>x[0].length&&x.shift();for(e=0;e<x.length;++e)x[e].endsWith(",")&&(x[e]=x[e].substr(0,x[e].length-1));0===ca&&0<x.length&&(ca=JSON.parse(x.shift()).id,
e=da,da=null,e.resolve(ca));var y;for(e=0;e<x.length;++e)(y=JSON.parse(x[e]))&&y.end?close():y&&y.hb&&y.id===ca?h({hb:!0}):Fa(y)}catch(Ea){}ha||(n=!0,w())}};y.send()}var y,z=n(e),aa=f,ca=0,da=window.createPromiseCapability(),ha=!1,ia=null,Fa=null,wa=0;return{send:h,uK:function(e,f,h){Fa=e;ia=h;ha=!1;r();w();f&&f();return Promise.resolve()},VF:function(){r();Fa=null;ha=!0;ia&&ia();y.abort();return Promise.resolve()}}}(e,w)}e.d(da,"a",function(){return ca});var ea=e(2),aa=e(29),ha=e(41),ba=e(158)}}]);}).call(this || window)
