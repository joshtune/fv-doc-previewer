/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[6],{159:function(ia,da,e){function ca(e,h,n){return Object(na.b)(void 0,void 0,void 0,function(){var r,w,x,y,z,aa;return Object(na.d)(this,function(ba){switch(ba.label){case 0:return r=Ga.getDocument(),w=[1],x=Ga.ta(),y=x.xb().filter(function(e){return e.PageNumber===ya&&e.IsAdded}).concat(),[4,Object(ra.c)(e,{extension:"pdf"})];case 1:return z=ba.da(),aa=!0,[4,r.yg(z,w,ya,aa)];case 2:return ba.da(),[4,r.sh([ya+1],aa)];case 3:return ba.da(),
Ga.jJ(ya),Ga.Mg(),y.forEach(function(e){return e.vs(ya)}),x.Hf(y),ha(ya),f(h.galleys,n),f(h.objects,n),[2]}})})}function ea(e){e=(new DOMParser).parseFromString(e,"text/html").documentElement.querySelector("body");e.querySelectorAll("p").forEach(function(e){e.querySelectorAll("span").forEach(function(e){var f=e.getAttribute("style");f=aa(f,e.innerHTML);e.innerHTML=f});var f=e.getAttribute("style"),h=e.innerHTML.Mj("<br>","");e.innerHTML=aa(f,h)});return e.innerHTML.trim()}function aa(e,f){e.includes("bold")&&
(f="<strong>"+f+"</strong>");e.includes("italic")&&(f="<em>"+f+"</em>");e.includes("text-decoration: underline")&&(f="<u>"+f+"</u>");return f}function ha(e){var f=Ga.ta(),h=f.xb().filter(function(f){return f.tj()&&f.PageNumber===e});f.Uh(h,{force:!0,source:"contentEditTool"})}function ba(e){e.forEach(function(e){Da[ya]||(Da[ya]=[]);Da[ya].find(function(f){return f.id===e.id})||Da[ya].push(e)})}function z(e){e.forEach(function(e){ta[ya]||(ta[ya]=[]);ta[ya].find(function(f){return f.id===e.id})||ta[ya].push(e)})}
function w(e,f,h,n){this.top=e;this.left=f;this.bottom=h;this.right=n;this.topVal=function(){return Math.round(this.top)};this.bottomVal=function(){return Math.round(this.bottom)};this.leftVal=function(){return Math.round(this.left)};this.rightVal=function(){return Math.round(this.right)};this.height=function(){return Math.round(Math.abs(this.top-this.bottom))};this.width=function(){return Math.round(this.right-this.left)};this.zO=function(e){return this.topVal()!=e.topVal()||this.leftVal()!=e.leftVal()||
this.bottomVal()!=e.bottomVal()||this.rightVal()!=e.rightVal()}}function y(e,f,h,n,r){this.id=e;this.pagenum=f;this.galleysContents=h;this.contents=n;this.galleyBox=r}function r(e,f,h,n){this.id=f;this.type=e;this.bbox=h;this.pagenum=n}function n(e,f,h,n,r){this.id=e;this.pagecount=f;this.pageBBox=h;this.galleys=n;this.objects=r}function h(e,f,h,n){var r=[];(new DOMParser).parseFromString(h,"text/html").documentElement.querySelectorAll("p").forEach(function(e,f){r[f]=e.innerHTML});f=(new DOMParser).parseFromString(f,
"text/html");var w=null;f.documentElement.querySelectorAll("p").forEach(function(e,f){f<r.length?(e.innerHTML=r[f],w=e.getAttribute("style"),w=w.replace("font:italic","font:normal"),w=w.replace(" bold "," normal "),w=w.replace("underline:1;","underline:0;"),e.setAttribute("style",w)):e.remove()});for(h=f.documentElement.querySelectorAll("p").length;h<r.length;h++){var x=document.createElement("p");x.setAttribute("id","0");x.innerHTML=r[h];null!=w&&x.setAttribute("style",w);f.documentElement.querySelector("body").appendChild(x)}f=
f.documentElement.querySelector("body").innerHTML;var y="";ta[ya].forEach(function(e){e.id==n&&(y=e)});if(""==y)return"";e="<DOC id='"+e.id+"' pagecount='"+e.pagecount+"'>";e+="<STORY galley_ids='"+n+"' pagenum='"+ya+"'>";e+="<galleys>"+y.galleysContents+"</galleys>";y.contents=f;return e=e+f+"\n</STORY></DOC>"}function f(e,f){if(!(0<e.length&&e[0].pagenum!==Ga.bh())){var h=[],n=Ga.getDocument(),w=null;e.forEach(function(e){if(e instanceof r){var x=n.Im(ya,e.bbox.leftVal(),e.bbox.topVal());var z=
x.x;var aa=x.y;var ba=n.Im(ya,e.bbox.rightVal(),e.bbox.bottomVal());x=ba.x;ba=ba.y}else if(e instanceof y)x=n.Im(ya,e.galleyBox.leftVal(),e.galleyBox.topVal()),z=x.x,aa=x.y,ba=n.Im(ya,e.galleyBox.rightVal(),e.galleyBox.bottomVal()),x=ba.x,ba=ba.y;else return;var ca=new window.Core.Annotations.RectangleAnnotation,da=la.a.OBJECT;e instanceof y&&(da=la.a.TEXT);ca.kea(e,da);ca.PageNumber=e.pagenum;ca.X=z;ca.Y=aa;ca.Width=x-z;ca.Height=ba-aa;ca.StrokeColor=new ma.a("#3183C8");ca.FillColor=new ma.a(255,
255,255,.01);ca.Style="dash";ca.Dashes="4,3";ca.GF();ca.selectionModel=Aa.a;h.push(ca);"undefined"!==typeof f&&f===e.id&&(w=ca)});e=Ga.ta();e.Hf(h);w&&e.xh(w);e.be(h)}}function x(e,h,n){return Object(na.b)(this,void 0,void 0,function(){var r,w,x,y;return Object(na.d)(this,function(aa){switch(aa.label){case 0:r=e.data;w=r.cmd;switch(w){case "isReady":return[3,1];case "initialiseInfixServer":return[3,3];case "exportFile":return[3,4];case "importText":return[3,5];case "transformObject":return[3,5];case "deleteObject":return[3,
6]}return[3,7];case 1:return[4,Object(wa.b)()];case 2:return x=aa.da(),va.postMessage({cmd:"initialiseInfixServer",l:x}),[3,7];case 3:return(y=fa(r.resultsXML))?h():n("License key does not have content edit permission"),[3,7];case 4:return r.exportPerformed?ka(r.exportXML,r.objectXML,r.resultsXML):(z(Ea.galleys),ba(Ea.objects),ha(ya),f(Ea.galleys),f(Ea.objects)),[3,7];case 5:return pa(r.resultsXML),ca(r.pdfBuffer,Ea,r.id),[3,7];case 6:return pa(r.resultsXML),Ea.galleys=Ea.galleys.filter(function(e){return e.id!==
r.id}),Ea.objects=Ea.objects.filter(function(e){return e.id!==r.id}),ca(r.pdfBuffer,Ea),[3,7];case 7:return[2]}})})}function fa(e){e=new Uint8Array(e);var f=(new TextDecoder("utf-8")).decode(e);e=!1;f=(new DOMParser).parseFromString(f,"text/xml").getElementsByTagName("LicenseCheck");null!==f&&0<f.length&&(f=f[0].getElementsByTagName("Status")[0].innerHTML,"error"!=f&&"ok"==f&&(e=!0));return e}function ka(e,h,n){var r=new Uint8Array(e),w=new TextDecoder("utf-8");e=w.decode(r);r=new Uint8Array(h);h=
w.decode(r);r=new Uint8Array(n);n=w.decode(r);Ea=oa(e,h,n);z(Ea.galleys);ba(Ea.objects);ha(ya);f(Ea.galleys);f(Ea.objects)}function ja(e,f){e=parseFloat(e);return isNaN(f)||f<e?e:f}function oa(e,f,h){var x;var z=new DOMParser;h=z.parseFromString(h,"text/xml");Array.prototype.slice.call(h.getElementsByTagName("BBox")).forEach(function(e){if("CropBox"==e.getAttribute("Name")){var f=parseFloat(e.getElementsByTagName("Top").item(0).innerHTML),h=parseFloat(e.getElementsByTagName("Bottom").item(0).innerHTML),
n=parseFloat(e.getElementsByTagName("Left").item(0).innerHTML);e=parseFloat(e.getElementsByTagName("Right").item(0).innerHTML);x=new w(f,n,h,e)}});z=new DOMParser;h=z.parseFromString(e,"text/xml");var aa=[];Array.prototype.slice.call(h.getElementsByTagName("STORY")).forEach(function(e){var f=e.getAttribute("galley_ids"),h=Array.prototype.slice.call(e.getElementsByTagName("g"))[0],n=h.getAttribute("bbox").split(" ");n=new w(parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3]));h=h.innerHTML;
var r=Array.prototype.slice.call(e.getElementsByTagName("galleys"))[0];r.parentNode.removeChild(r);e=e.innerHTML;e=(new DOMParser).parseFromString(e,"text/html").documentElement.querySelector("body").innerHTML.trim();aa.push(new y(f,ya,h,e,n))});z=new DOMParser;var ba=[];e=z.parseFromString(f,"text/xml").getElementsByTagName("Object");Array.prototype.slice.call(e).forEach(function(e){var f=e.getAttribute("Type"),h=e.getAttribute("OID");e=Array.prototype.slice.call(e.getElementsByTagName("Point"));
var n=Number.NaN,x=Number.NaN,y=Number.NaN,z=Number.NaN;e.forEach(function(e){var f=e.getAttribute("Name");"TL"==f?(n=ja(e.getAttribute("Y"),n),y=ja(e.getAttribute("X"),y)):"TR"==f?(n=ja(e.getAttribute("Y"),n),z=ja(e.getAttribute("X"),z)):"BR"==f?(x=ja(e.getAttribute("Y"),x),z=ja(e.getAttribute("X"),z)):"BL"==f&&(x=ja(e.getAttribute("Y"),x),y=ja(e.getAttribute("X"),y))});ba.push(new r(f,h,new w(n,y,x,z),ya))});e=Array.prototype.slice.call(h.getElementsByTagName("DOC"))[0].getAttribute("id");return new n(e,
1,x,aa,ba)}function pa(e){var f;e=(new TextDecoder("utf-8")).decode(e);e=(new DOMParser).parseFromString(e,"text/xml");var h=e.getElementsByTagName("Galley").item(0);if(null!=h){var n=h.getAttribute("id");h=e.getElementsByTagName("BBox");h=Array.prototype.slice.call(h);h.forEach(function(e){var h=e.getElementsByTagName("Top"),n=parseFloat(h.item(0).innerHTML);h=e.getElementsByTagName("Left");var r=parseFloat(h.item(0).innerHTML);h=e.getElementsByTagName("Bottom");var x=parseFloat(h.item(0).innerHTML);
h=e.getElementsByTagName("Right");e=parseFloat(h.item(0).innerHTML);f=new w(n,r,x,e)});ta[ya].forEach(function(e){e.id==n&&1==f.zO(e.galleyBox)&&(e.galleyBox=f)})}h=e.getElementsByTagName("Object").item(0);if(null!=h){var r=h.getAttribute("OID");h=e.getElementsByTagName("BBox");h=Array.prototype.slice.call(h);h.forEach(function(e){var h=e.getElementsByTagName("Top"),n=parseFloat(h.item(0).innerHTML);h=e.getElementsByTagName("Left");var r=parseFloat(h.item(0).innerHTML);h=e.getElementsByTagName("Bottom");
var x=parseFloat(h.item(0).innerHTML);h=e.getElementsByTagName("Right");e=parseFloat(h.item(0).innerHTML);f=new w(n,r,x,e)});Da[ya].forEach(function(e){e.id==r&&1==f.zO(e.bbox)&&(e.bbox=f)})}}e.r(da);var na=e(1),ra=e(63),ma=e(7),Aa=e(425),Fa=e(34),wa=e(73),qa=e(2),la=e(171),va=null,za=null,ta={},Da={},Ea,ya,Ga;da["default"]={Lba:function(e){return Object(na.b)(void 0,void 0,void 0,function(){return Object(na.d)(this,function(){za||(Ga=e,za=new Promise(function(e,f){va=new Worker(window.Core.getWorkerPath()+
"contentEdit/InfixServerModule.js");va.onmessage=function(h){x(h,e,f)};va.postMessage({cmd:"isReady"})}));return[2,za]})})},Nba:function(e,f,h){return Object(na.b)(void 0,void 0,void 0,function(){var n,r,w,x;return Object(na.d)(this,function(y){switch(y.label){case 0:return ya=f,ha(ya),ta[ya]=[],Da[ya]=[],[4,e.Zh([ya])];case 1:return n=y.da(),r=new TextEncoder,w=r.encode(""),x=w.buffer,va.postMessage({cmd:"exportFile",performExport:h,pdfFile:n,tableData:x},[n,x]),[2]}})})},t3:function(e){var f=e.id;
ya=e.pageNumber;va.postMessage({cmd:"deleteObject",objectID:f,isText:e.isText})},Iga:function(e){var f=e.id,h=e.position,n=h.top,r=h.left,w=h.bottom;h=h.right;ya=e.pageNumber;va.postMessage({cmd:"transformObject",objectID:f,isText:e.isText,topVal:n,leftVal:r,bottomVal:w,rightVal:h})},$ga:function(e,f){f=f.replace(/<span style="color: var\(--text-color\);">(.*?)<\/span>/g,"$1");var n=e.nt.id;ya=e.PageNumber;e=Ea.galleys.find(function(e){return e.id===n});e=ea(e.contents);f=h(Ea,e,f,n);""!=f?(f=(new TextEncoder).encode(f).buffer,
e=Object(Fa.c)()||"https://www.pdftron.com/webfonts/v2/",va.postMessage({cmd:"importText",webFontURL:e,galleyId:n,importData:f},[f])):Object(qa.f)("Unable to generate import XML")},k7:function(e){if(e)return ea(e.contents);Object(qa.f)("Unable to extract document content")}}},425:function(ia,da,e){var ca=e(1);ia=e(78);var ea=e(43);e=function(e){function aa(){return null!==e&&e.apply(this,arguments)||this}Object(ca.c)(aa,e);aa.prototype.testSelection=function(e,z,w){return ea.a.tk(e,z,w)};return aa}(ia.a);
da.a=e}}]);}).call(this || window)
